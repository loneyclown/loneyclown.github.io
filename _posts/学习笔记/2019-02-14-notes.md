---
layout: blog
# istop: true
title: "日常学习笔记"
mark: 原创
# background-image: https://o243f9mnq.qnssl.com/2017/06/116099051.jpg
background: notes
date:  2019-02-14
category: 学习笔记
tags:
- js
- date
- 时间格式化
---

# 2019-02-14
## 苹果手机里面使用new Date()遇到的一个小bug
### 格式化`yyyy-mm-dd hh:MM`的情况
`alert(new Date('2019-02-14 11:00'))  //iphone: Invalid Date`  
`alert(new Date('2019-02-14 11:00'))  //Android: Thu Feb 14 2019 11:00:00 GMT+0800(CST)`  
格式化`yyyy-mm-dd hh:MM`时，苹果端会返回`null`或者`Invalid Date`，而安卓端则正常。

### 格式化`yyyy-mm-dd`的情况
`alert(new Date('2019-02-14'))  //iphone: Thu Feb 14 2019 08:00:00 GMT+0800(CST)`  
`alert(new Date('2019-02-14'))  //Android: Thu Feb 14 2019 08:00:00 GMT+0800(CST)`  
格式化`yyyy-mm-dd`时，苹果端和安卓端均返回正常结果。

### 格式化`yyyy/mm/dd hh:MM`和`yyyy/mm/dd`
`alert(new Date('2019/02/14 11:00'))  //iphone: Thu Feb 14 2019 11:00:00 GMT+0800(CST)`  
`alert(new Date('2019/02/14 11:00'))  //Android: Thu Feb 14 2019 11:00:00 GMT+0800(CST)`  
`alert(new Date('2019/02/14'))  //iphone: Thu Feb 14 2019 08:00:00 GMT+0800(CST)`  
`alert(new Date('2019/02/14'))  //Android: Thu Feb 14 2019 08:00:00 GMT+0800(CST)`  
格式化`yyyy/mm/dd hh:MM`和`yyyy/mm/dd`时，  苹果端和安卓端均返回正常结果。

### 解决方案
#### 使用正则替换“-”为“/”
```js
function formatIOS(date) {
  retuen new Date(date.replace(/-/g, "/"))
}
```
