---
layout: blog
# essays: true
title: "小写金额转大写"
mark: 转录
# background-image: http://ot1cc1u9t.bkt.clouddn.com/17-7-15/43335546.jpg
background: pick
date: 2018-09-07
category: 随拾
tags:
- js
---

# 小写金额转大写
```js
function changeZN(){

  let charList=[0, '壹', '贰', '叁', '肆','伍', '陆', '柒', '捌', '玖'];
  let lowUnitList= ['千','百','拾',''];

  let num='0';
  num=num.padStart(Math.ceil(num.length/8)*8,0);
  let len=Math.ceil(num.length/8);
  let numSlice=[];

  for(let i=0;i<len;i++){
    numSlice.push(num.slice(i*8,(i+1)*8))
  }

  let allList=[];

  for(let k=0;k<len;k++){

    let num=numSlice[k];
    num=num.padStart(Math.ceil(num.length/4)*4,0);
    let unitSlice=[];
    let unitLen=Math.floor(num.length/4);
    let uintInteger=Math.floor(num/(10**4));
    let unitMod=num%(10**4);

    for(let n=0;n<unitLen;n++){
      unitSlice.push(num.slice(n*4,(n+1)*4))
    }


    // console.log(unitSlice);

    let charNumList=[]
    for(let i=0;i<unitSlice.length;i++){
      let charNum=''
      for(let j=0;j<unitSlice[i].length;j++){
        if(unitSlice[i][j]!=='0'){
          charNum+=charList[unitSlice[i][j]]+lowUnitList[j]
        }
        else{
          charNum+=0
        }
        
      }
      charNumList.push(charNum)
    }
    // console.log(charNumList)

    allList.push(charNumList.join('万')+(k===len-1?'元':'亿'));
  
  }
  
  console.log(allList.join('')
    .replace(/^(0{4}['千百拾万亿元'])+$/,'零元')
    .replace(/^(0+['千百拾万亿']?)+/,'')
    .replace(/0{4,}['千百拾万']/g,'')
    .replace(/0{1,4}(['千百拾万亿元'])/g,"$1")
    .replace(/0{1,3}['千百拾万']?/g,'零')
  )

}
```

_PS:以上代码来自我的同事大佬。。。_