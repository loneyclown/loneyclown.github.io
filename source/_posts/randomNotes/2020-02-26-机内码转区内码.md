---
layout: blog
# istop: true
title: "机内码转区内码"
mark: 转载
# background-image: https://o243f9mnq.qnssl.com/2017/06/116099051.jpg
background: notes
date:  2020-02-26
category: 随拾
tags:
- 字符编码
---

```js
function 十六进制字符串转十六进制数(v) {
  if (typeof v === "string") {
    v = parseInt("0x" + v);
  }
  return v;
}
function 机内码转汉字(机内码) {
  机内码 = 十六进制字符串转十六进制数(机内码);
  let 国标码 = (机内码 - 0x8080);
  let 区位码0x = (国标码 - 0x2020).toString(16);
  let 区位码拆s = 区位码0x.split("").map(x => x);
  let 区位码s = [], 区 = "";
  区位码拆s.forEach((item, index) => {
    区 = 区+item;
    if((index+1)%2 === 0) {
      区位码s.push(区);
      区 = "";
    }
  });
  区位码s = 区位码s.map(x => 十六进制字符串转十六进制数(x));
  return 区位码s.join("");
}
console.log(机内码转汉字("d3b2"));
// => 5118
console.log(机内码转汉字("bacb"));
// => 2643
```