---
layout: blog
# istop: true
title: "三维立体坐标点，在x轴，y轴相同的情况下，取出z轴最大的坐标点"
mark: 原创
# background-image: https://o243f9mnq.qnssl.com/2017/06/116099051.jpg
background: notes
date:  2020-04-29
category: 学习笔记
tags:
- js
- 排序
---

#### 题记
最近朋友遇到一个问题，一组三维立体坐标点，在x轴，y轴相同的情况下，要取出z轴最大的那个的坐标点。

#### 代码
```js
const testArr = [
  [45757.22541737171, 226532.12132301644, 52.45700027465815],
  [45757.22541737171, 226532.12132301644, 162.45700027465816],
  [45757.22541737171, 226532.12132301644, 72.45700027465816],
  [45757.22541737171, 226532.12132301644, 82.45700027465816],
  [45757.22541737171, 226532.12132301644, 92.45700027465816],
  [45757.22541737171, 226532.12132301644, 102.45700027465816],
  [45757.22541737171, 226532.12132301644, 112.45700027465816],
  [45757.22541737171, 226532.12132301644, 122.45700027465816],
  [45757.22541737171, 226532.12132301644, 132.45700027465816],
  [45757.22541737171, 226532.12132301644, 142.45700027465816],
  [45756.43914293511, 226562.64343069226, 52.457000274658206],
  [45756.43914293511, 226562.64343069226, 62.457000274658206],
  [45756.43914293511, 226562.64343069226, 72.45700027465821],
  [45756.43914293511, 226562.64343069226, 82.45700027465821],
  [45756.43914293511, 226562.64343069226, 92.45700027465821],
  [45756.43914293511, 226562.64343069226, 102.45700027465821],
  [45756.43914293511, 226562.64343069226, 112.45700027465821],
  [45791.873784629126, 226560.04881890872, 52.457000274658206],
  [45791.873784629126, 226560.04881890872, 172.4570002746582],
  [45791.873784629126, 226560.04881890872, 162.4570002746582],
  [45791.873784629126, 226560.04881890872, 142.4570002746582],
  [45791.873784629126, 226560.04881890872, 92.45700027465821],
  [45791.873784629126, 226560.04881890872, 102.45700027465821],
  [45791.873784629126, 226560.04881890872, 112.45700027465821],
  [45791.873784629126, 226560.04881890872, 122.45700027465821],
  [45791.873784629126, 226560.04881890872, 132.4570002746582],
  [45796.25954354428, 226532.31399971253, 52.45700027465815],
  [45796.25954354428, 226532.31399971253, 182.45700027465816],
  [45796.25954354428, 226532.31399971253, 162.45700027465816],
  [45796.25954354428, 226532.31399971253, 82.45700027465816],
  [45796.25954354428, 226532.31399971253, 92.45700027465816],
  [45796.25954354428, 226532.31399971253, 102.45700027465816],
  [45796.25954354428, 226532.31399971253, 112.45700027465816],
  [45796.25954354428, 226532.31399971253, 122.45700027465816],
  [45796.25954354428, 226532.31399971253, 132.45700027465816],
  [45796.25954354428, 226532.31399971253, 142.45700027465816],
  [45796.25954354428, 226532.31399971253, 152.45700027465816],
  [45796.25954354428, 226532.31399971253, 162.45700027465816],
  [45796.25954354428, 226532.31399971253, 182.45700027465816],
  [45796.25954354428, 226532.31399971253, 182.45700027465816],
  [45791.873784629126, 226560.04881890872, 142.4570002746582],
  [45791.873784629126, 226560.04881890872, 152.4570002746582],
  [45791.873784629126, 226560.04881890872, 162.4570002746582],
  [45791.873784629126, 226560.04881890872, 172.4570002746582],
  [45757.22541737171, 226532.12132301644, 162.45700027465816],
  [45757.22541737171, 226532.12132301644, 162.45700027465816]
];

function getZcoordMax (sourceArr) {
  const res = sourceArr.reduce((acc, curr) => {
    let key = curr.slice(0, 2).join(','), arr, z = curr[2];
    acc[key] = acc[key] || {};
    acc[key].max = acc[key].max || [0, 0, 0];
    arr = acc[key].arr;
    if (arr) {
      arr.push(z);
      if (acc[key].max[2] <= z) acc[key].max = curr;
    } else {
      acc[key].arr = [z];
    }
    return acc
  }, {});
  return Object.keys(res).map(x => res[x].max);
}
```

输出结果：
```js
[
  [ 45757.22541737171, 226532.12132301644, 162.45700027465816 ],
  [ 45756.43914293511, 226562.64343069226, 112.45700027465821 ],
  [ 45791.873784629126, 226560.04881890872, 172.4570002746582 ],
  [ 45796.25954354428, 226532.31399971253, 182.45700027465816 ]
]
```