---
layout: blog
# istop: true
title: "传统web项目配置babel@7自动兼容ES6语法"
mark: 原创
# background-image: https://o243f9mnq.qnssl.com/2017/06/116099051.jpg
background: notes
date:  2019-08-12
category: 学习笔记
tags:
- js
- babel
---

### 安装babel@7
```shell
npm install --save-dev @babel/core @babel/cli @babel/preset-env
npm install --save @babel/polyfill
```

### 在项目的根目录下创建一个命名为 babel.config.js 的配置文件
默认配置：
```js
const presets = [
  [
    "@babel/env",
    {
      targets: {
        edge: "17",
        firefox: "60",
        chrome: "67",
        safari: "11.1",
      },
      useBuiltIns: "usage",
    },
  ],
];
module.exports = { presets };
```
支持市场份额超过5%的浏览器：
```js
"targets": {
  "browsers": "> 5%"
}
```
支持最后两个版本的浏览器以及IE7+：
```js
"targets": {
   "browsers": ["last 2 versions", "ie >= 7"]
}
```

### 监听转化
在需要转化的文件目录执行：
```shell
npx babel --presets=@babel/env --root-mode upward shangpu_list_map.js --watch --out-file shangpu_list_map.min.js
```
_PS：若提示命令不存在，请全局安装babel-cli_
